<div class="dashboard">
  <div class="dashboard-header">
    <h2>Company Dashboard</h2>
    <p>Manage and respond to customer reviews</p>
  </div>

  <form (ngSubmit)="onSearch()" class="search-form">
    <h3>Filter Reviews</h3>
    <div class="search-filters">
      <div class="form-group">
        <label for="flightNumber">Flight Number</label>
        <input 
          type="text" 
          id="flightNumber"
          placeholder="e.g., AF123" 
          [(ngModel)]="filters.flightNumber" 
          name="flightNumber" />
      </div>
      
      <div class="form-group">
        <label for="keyword">Keyword</label>
        <input 
          type="text" 
          id="keyword"
          placeholder="Search in reviews..." 
          [(ngModel)]="filters.keyword" 
          name="keyword" />
      </div>
      
      <div class="form-group">
        <label for="date">Flight Date</label>
        <input 
          type="date" 
          id="date"
          [(ngModel)]="filters.date" 
          name="date" />
      </div>
      
      <div class="form-group">
        <label for="state">Status</label>
        <select 
          id="state"
          [(ngModel)]="filters.state" 
          name="state">
          <option value="">All Statuses</option>
          <option value="SUBMITTED">Submitted</option>
          <option value="TREATED">Treated</option>
          <option value="PUBLISHED">Published</option>
          <option value="REJECTED">Rejected</option>
        </select>
      </div>
    </div>
    <button type="submit" class="search-button">Filter Reviews</button>
  </form>

  <div class="reviews-container" *ngIf="reviews.length > 0; else noReviews">
    <div *ngFor="let review of reviews" class="review-item">
      <div class="review-summary">
        <div class="review-header">
          <h3>{{ review.flightNumber }} - {{ review.origin }} to {{ review.destination }}</h3>
          <div class="flight-date" *ngIf="review.flightDate">
            <strong>Flight Date:</strong> {{ review.flightDate | date:'mediumDate' }}
          </div>
          <div class="rating">
            <span class="star">â˜…</span>
            <span>{{ review.rating }}/5</span>
          </div>
          <div class="state-badge" [class]="'state-' + review.state.toLowerCase()">
            {{ review.state }}
          </div>
        </div>
        
        <div class="review-content">
          <p><strong>Review:</strong> {{ review.description }}</p>
          <p><strong>Submitted:</strong> {{ review.submittedAt | date:'medium' }}</p>
          <p><strong>Response:</strong> {{ review.responseText || 'No response yet' }}</p>
        </div>
      </div>
      
      <div class="review-actions">
        <button (click)="viewReview(review.id)" class="view-btn">View Details</button>
      </div>
    </div>
  </div>

  <ng-template #noReviews>
    <div class="no-reviews">
      <h3>No reviews found</h3>
      <p>Try adjusting your filter criteria or check back later for new reviews.</p>
    </div>
  </ng-template>

  <div class="pagination" *ngIf="reviews.length > 0">
    <button (click)="prevPage()" [disabled]="page === 0" class="secondary">Previous</button>
    <span>Page {{ page + 1 }} of {{ totalPages }}</span>
    <button (click)="nextPage()" [disabled]="page >= totalPages - 1" class="secondary">Next</button>
  </div>
</div>
